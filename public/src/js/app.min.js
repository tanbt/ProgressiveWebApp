var deferredPrompt,enableNotificationButtons=document.querySelectorAll(".enable-notifications");function configurePushSub(){var n;"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(i){return(n=i).pushManager.getSubscription()}).then(function(i){if(null===i){var o=urlBase64ToUint8Array("BIpkou9VB61jXIg_nfQzNNyTtCipd8bh0ZOybhHn145N2Rdj8dC1Vv0LbGEKg8icvyhsYQuWuACDhx7Ps7xEtQQ");return n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:o})}}).then(function(i){return fetch("https://pwagram-45678.firebaseio.com/subscriptions.json",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)})}).then(function(i){console.log(i.status),i.ok&&displayConfirmNotification()}).catch(function(i){console.log(i)})}function askForNotificationPermission(){Notification.requestPermission(function(i){console.log("User choice: ",i),"granted"!==i?console.log("No notification permission granted!"):configurePushSub()})}function displayConfirmNotification(){if("serviceWorker"in navigator){var o={body:"You successfully subscribed to our Notification Service",icon:"/src/images/icons/app-icon-96x96.png",image:"/src/images/sf-boat.jpg",dir:"rtl",lang:"en-US",vibrate:[100,50,200],badge:"/src/images/icons/app-icon-96x96.png",tag:"confirm-notificaiton",renotify:!0,actions:[{action:"confirm",title:"Okay",icon:"/src/images/icons/app-icon-96x96.png"},{action:"cancel",title:"Cancel",icon:"/src/images/icons/app-icon-96x96.png"}]};navigator.serviceWorker.ready.then(function(i){i.showNotification("Successfully subscribed! (fron SW)",o)})}}window.Promise||(window.Promise=Promise),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js",{scope:"/"}).then(function(){console.log("Service Worker registered!")}).catch(function(i){console.log(i)}),window.addEventListener("beforeinstallprompt",function(i){return console.log("beforeinstallprompt fired"),i.preventDefault(),deferredPrompt=i,!1}),"Notification"in window&&enableNotificationButtons.forEach(function(i){i.style.display="inline-block",i.addEventListener("click",askForNotificationPermission)});